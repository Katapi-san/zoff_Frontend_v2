(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,54858,e=>{"use strict";let t="https://zoff-scope-backend.azurewebsites.net";async function s(e,s){console.log(`[API] Fetching stores from: ${t}/stores/`);let a=new URLSearchParams;e&&a.append("prefecture",e),s&&a.append("city",s),a.append("_t","FORCE_REDEPLOY_"+Date.now().toString());let r=await fetch(`${t}/stores/?${a.toString()}`,{cache:"no-store"});if(!r.ok)throw Error("Failed to fetch stores");return r.json()}async function a(e){let s=await fetch(`${t}/stores/${e}/staff`,{cache:"no-store"});if(!s.ok)throw Error("Failed to fetch staff");return s.json()}async function r(){let e=await fetch(`${t}/staffs/`,{cache:"no-store"});if(!e.ok)throw Error("Failed to fetch all staff");return e.json()}async function l(e=1e3){let s=await fetch(`${t}/tags/?limit=${e}`,{cache:"no-store"});if(!s.ok)throw Error("Failed to fetch tags");return s.json()}async function n(e){let s=await fetch(`${t}/staffs/${e}`,{cache:"no-store"});if(!s.ok)throw Error("Failed to fetch staff");return s.json()}e.s(["fetchAllStaff",()=>r,"fetchStaff",()=>n,"fetchStoreStaff",()=>a,"fetchStores",()=>s,"fetchTags",()=>l])},26809,e=>{"use strict";var t=e.i(43476),s=e.i(71645),a=e.i(18566);let r=(0,e.i(75254).default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);var l=e.i(46897),n=e.i(54858);let i=[{id:1,name:"メガネの作成・相談",duration:60},{id:2,name:"レンズ交換",duration:30},{id:3,name:"調整・メンテナンス",duration:15}],d=[{day:"火",date:10},{day:"水",date:11},{day:"木",date:12},{day:"金",date:13},{day:"土",date:14},{day:"日",date:15}],o=["10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00","20:00"];function c(){let e=(0,a.useParams)(),c=(0,a.useRouter)(),[f,x]=(0,s.useState)(null),[h,m]=(0,s.useState)(null),[u,b]=(0,s.useState)(null),[g,p]=(0,s.useState)(null);if((0,s.useEffect)(()=>{e.id&&(async()=>{try{let t=await (0,n.fetchStaff)(e.id);x(t)}catch(e){console.error("Failed to fetch staff",e)}})()},[e.id]),(0,s.useEffect)(()=>{p(null)},[u]),!f)return(0,t.jsx)("div",{className:"p-10 text-center text-gray-500",children:"読み込み中..."});let y=i.find(e=>e.id===h);return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50 pb-32 font-sans",children:[(0,t.jsxs)("header",{className:"bg-white border-b p-4 text-center sticky top-0 z-10 grid grid-cols-3 items-center",children:[(0,t.jsx)("button",{onClick:()=>c.back(),className:"text-blue-600 justify-self-start p-1 hover:bg-gray-50 rounded-full transition-colors",children:(0,t.jsx)(r,{size:28,strokeWidth:2.5})}),(0,t.jsx)("h1",{className:"text-lg font-bold text-gray-800",children:"指名予約"}),(0,t.jsx)("div",{})]}),(0,t.jsxs)("div",{className:"p-4 max-w-md mx-auto space-y-6",children:[(0,t.jsxs)("div",{className:"bg-white p-4 rounded-xl shadow-sm flex items-start border-l-4 border-blue-600 relative overflow-hidden",children:[(0,t.jsx)("div",{className:"w-16 h-16 mr-4 rounded-full overflow-hidden bg-gray-200 flex-shrink-0 border border-gray-100",children:(0,t.jsx)("img",{src:f.image_url||"/images/staff/default.jpg",alt:f.display_name,className:"object-cover w-full h-full",onError:e=>{e.currentTarget.src="/globe.svg"}})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h2",{className:"font-bold text-lg mb-1",children:[f.display_name," ",(0,t.jsx)("span",{className:"text-sm font-normal text-gray-500",children:"さんを指名中"})]}),(0,t.jsxs)("div",{className:"flex items-center text-gray-500 text-sm mb-2",children:[(0,t.jsx)(l.MapPin,{size:14,className:"mr-1"}),f.store?.name||"店舗未設定"]}),(0,t.jsx)("div",{className:"flex flex-wrap gap-1",children:(f.tags||[]).slice(0,3).map(e=>(0,t.jsxs)("span",{className:"text-xs text-blue-500",children:["#",e.name]},e.id))})]})]}),(0,t.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-sm",children:[(0,t.jsxs)("h3",{className:"font-bold text-lg mb-4 flex items-center text-gray-800",children:[(0,t.jsx)("span",{className:"bg-blue-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm mr-2 font-bold",children:"1"}),"ご希望のメニュー"]}),(0,t.jsx)("div",{className:"space-y-3",children:i.map(e=>(0,t.jsxs)("button",{onClick:()=>m(e.id),className:`w-full flex justify-between items-center p-4 rounded-xl border transition-all ${h===e.id?"border-blue-500 bg-blue-50 ring-1 ring-blue-500":"border-gray-200 hover:bg-gray-50"}`,children:[(0,t.jsx)("span",{className:"font-medium text-gray-700",children:e.name}),(0,t.jsxs)("span",{className:"bg-gray-100 text-gray-600 text-xs px-2 py-1 rounded font-medium",children:[e.duration,"分"]})]},e.id))})]}),(0,t.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-sm",children:[(0,t.jsxs)("h3",{className:"font-bold text-lg mb-4 flex items-center text-gray-800",children:[(0,t.jsx)("span",{className:"bg-blue-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm mr-2 font-bold",children:"2"}),"日時選択"]}),(0,t.jsxs)("div",{className:"flex space-x-3 overflow-x-auto pb-4 scrollbar-hide -mx-2 px-2",children:[d.map((e,s)=>(0,t.jsxs)("button",{onClick:()=>b(e.date),className:`flex-shrink-0 w-16 h-20 rounded-xl border flex flex-col items-center justify-center transition-all ${u===e.date?"bg-blue-600 text-white border-blue-600 shadow-xl transform scale-105":"border-gray-200 text-gray-700 hover:bg-gray-50 hover:border-gray-300"}`,children:[(0,t.jsx)("span",{className:`text-sm mb-1 font-medium ${u===e.date?"text-blue-100":"text-gray-500"}`,children:e.day}),(0,t.jsx)("span",{className:"text-2xl font-bold",children:e.date})]},s)),(0,t.jsx)("button",{className:"flex-shrink-0 w-16 h-20 rounded-xl border border-gray-200 border-dashed text-gray-400 flex items-center justify-center text-2xl hover:bg-gray-50",children:"+"})]}),u&&(0,t.jsxs)("div",{className:"mt-6 pt-6 border-t border-gray-100 animate-in fade-in slide-in-from-top-4 duration-300",children:[(0,t.jsx)("h4",{className:"font-bold text-gray-700 mb-3 text-sm",children:"時間を選択してください"}),(0,t.jsx)("div",{className:"grid grid-cols-3 gap-3",children:o.map(e=>(0,t.jsx)("button",{onClick:()=>p(e),className:`py-2 px-1 rounded-lg text-sm font-bold border transition-all ${g===e?"bg-blue-600 text-white border-blue-600 shadow-md":"bg-white border-gray-200 text-gray-600 hover:border-blue-300 hover:text-blue-500"}`,children:e},e))})]})]})]}),(0,t.jsx)("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t p-4 shadow-[0_-5px_10px_rgba(0,0,0,0.05)] z-[60]",children:(0,t.jsxs)("div",{className:"max-w-md mx-auto flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-gray-500 text-sm font-medium",children:u&&g?`12月${u}日(火) ${g}`:"日時未選択"}),(0,t.jsx)("div",{className:`font-bold transition-all ${y?"text-blue-600 text-md":"text-blue-500 text-sm animate-pulse"}`,children:y?y.name:"メニューを選択してください"})]}),(0,t.jsx)("button",{disabled:!y||!u||!g,className:`px-8 py-3 rounded-full font-bold text-white shadow-lg transition-all transform ${!y||!u||!g?"bg-blue-300 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 active:scale-95 shadow-blue-200"}`,onClick:()=>{if(!f||!u||!g)return;let e=new URLSearchParams({staffName:f.display_name||"",date:u.toString(),time:g});c.push(`/reservation/complete?${e.toString()}`)},children:"予約する"})]})})]})}e.s(["default",()=>c],26809)}]);