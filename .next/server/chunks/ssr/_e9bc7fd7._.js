module.exports=[53250,a=>{"use strict";let b="https://zoff-scope-backend.azurewebsites.net";async function c(a,c){console.log(`[API] Fetching stores from: ${b}/stores/`);let d=new URLSearchParams;a&&d.append("prefecture",a),c&&d.append("city",c),d.append("_t",Date.now().toString());let e=await fetch(`${b}/stores/?${d.toString()}`,{cache:"no-store"});if(!e.ok)throw Error("Failed to fetch stores");return e.json()}async function d(a){let c=await fetch(`${b}/stores/${a}/staff`,{cache:"no-store"});if(!c.ok)throw Error("Failed to fetch staff");return c.json()}async function e(){let a=await fetch(`${b}/staffs/`,{cache:"no-store"});if(!a.ok)throw Error("Failed to fetch all staff");return a.json()}async function f(a=1e3){let c=await fetch(`${b}/tags/?limit=${a}`,{cache:"no-store"});if(!c.ok)throw Error("Failed to fetch tags");return c.json()}async function g(a){let c=await fetch(`${b}/staffs/${a}`,{cache:"no-store"});if(!c.ok)throw Error("Failed to fetch staff");return c.json()}async function h(a){let c=await fetch(`${b}/stores/${a}`,{cache:"no-store"});if(!c.ok)throw Error("Failed to fetch store");return c.json()}a.s(["fetchAllStaff",()=>e,"fetchStaff",()=>g,"fetchStore",()=>h,"fetchStoreStaff",()=>d,"fetchStores",()=>c,"fetchTags",()=>f])},13749,a=>{"use strict";let b=(0,a.i(70106).default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);a.s(["ChevronLeft",()=>b],13749)},99125,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(13749),f=a.i(24987),g=a.i(53250);let h=[{id:1,name:"メガネの作成・相談",duration:60},{id:2,name:"レンズ交換",duration:30},{id:3,name:"調整・メンテナンス",duration:15}];function i(){let a=(0,d.useParams)(),i=(0,d.useRouter)(),[j,k]=(0,c.useState)(null),[l,m]=(0,c.useState)(null),[n,o]=(0,c.useState)(null),[p,q]=(0,c.useState)(null),[r,s]=(0,c.useState)([]);if((0,c.useEffect)(()=>{let a=[],b=new Date,c=["日","月","火","水","木","金","土"];for(let d=0;d<7;d++){let e=new Date(b);e.setDate(b.getDate()+d),a.push({month:e.getMonth()+1,date:e.getDate(),day:c[e.getDay()]})}s(a)},[]),(0,c.useEffect)(()=>{a.id&&(async()=>{try{let b=await (0,g.fetchStaff)(a.id);k(b)}catch(a){console.error("Failed to fetch staff",a)}})()},[a.id]),(0,c.useEffect)(()=>{q(null)},[n,l]),!j)return(0,b.jsx)("div",{className:"p-10 text-center text-gray-500",children:"読み込み中..."});let t=h.find(a=>a.id===l),u=r.find(a=>a.date===n),v=(()=>{if(!t)return[];let a=[],b=10,c=0;for(;b<20;){let d=`${b}:${c.toString().padStart(2,"0")}`;for(a.push(d),c+=t.duration;c>=60;)c-=60,b+=1}return a})();return(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50 pb-32 font-sans",children:[(0,b.jsxs)("header",{className:"bg-white border-b p-4 text-center sticky top-0 z-10 grid grid-cols-3 items-center",children:[(0,b.jsx)("button",{onClick:()=>i.back(),className:"text-blue-600 justify-self-start p-1 hover:bg-gray-50 rounded-full transition-colors",children:(0,b.jsx)(e.ChevronLeft,{size:28,strokeWidth:2.5})}),(0,b.jsx)("h1",{className:"text-lg font-bold text-gray-800",children:"指名予約"}),(0,b.jsx)("div",{})]}),(0,b.jsxs)("div",{className:"p-4 max-w-md mx-auto space-y-6",children:[(0,b.jsxs)("div",{className:"bg-white p-4 rounded-xl shadow-sm flex items-start border-l-4 border-blue-600 relative overflow-hidden",children:[(0,b.jsx)("div",{className:"w-16 h-16 mr-4 rounded-full overflow-hidden bg-gray-200 flex-shrink-0 border border-gray-100",children:(0,b.jsx)("img",{src:j.image_url||"/images/staff/default.jpg",alt:j.display_name,className:"object-cover w-full h-full",onError:a=>{a.currentTarget.src="/globe.svg"}})}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("h2",{className:"font-bold text-lg mb-1",children:[j.display_name," ",(0,b.jsx)("span",{className:"text-sm font-normal text-gray-500",children:"さんを指名中"})]}),(0,b.jsxs)("div",{className:"flex items-center text-gray-500 text-sm mb-2",children:[(0,b.jsx)(f.MapPin,{size:14,className:"mr-1"}),j.store?.name||"店舗未設定"]}),(0,b.jsx)("div",{className:"flex flex-wrap gap-1",children:(j.tags||[]).slice(0,3).map(a=>(0,b.jsxs)("span",{className:"text-xs text-blue-500",children:["#",a.name]},a.id))})]})]}),(0,b.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-sm",children:[(0,b.jsxs)("h3",{className:"font-bold text-lg mb-4 flex items-center text-gray-800",children:[(0,b.jsx)("span",{className:"bg-blue-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm mr-2 font-bold",children:"1"}),"ご希望のメニュー"]}),(0,b.jsx)("div",{className:"space-y-3",children:h.map(a=>(0,b.jsxs)("button",{onClick:()=>m(a.id),className:`w-full flex justify-between items-center p-4 rounded-xl border transition-all ${l===a.id?"border-blue-500 bg-blue-50 ring-1 ring-blue-500":"border-gray-200 hover:bg-gray-50"}`,children:[(0,b.jsx)("span",{className:"font-medium text-gray-700",children:a.name}),(0,b.jsxs)("span",{className:"bg-gray-100 text-gray-600 text-xs px-2 py-1 rounded font-medium",children:[a.duration,"分"]})]},a.id))})]}),(0,b.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-sm",children:[(0,b.jsxs)("h3",{className:"font-bold text-lg mb-4 flex items-center text-gray-800",children:[(0,b.jsx)("span",{className:"bg-blue-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm mr-2 font-bold",children:"2"}),"日時選択"]}),(0,b.jsx)("div",{className:"flex space-x-3 overflow-x-auto pb-4 scrollbar-hide -mx-2 px-2",children:r.map((a,c)=>(0,b.jsxs)("button",{onClick:()=>o(a.date),className:`flex-shrink-0 w-16 h-20 rounded-xl border flex flex-col items-center justify-center transition-all ${n===a.date?"bg-blue-600 text-white border-blue-600 shadow-xl transform scale-105":"border-gray-200 text-gray-700 hover:bg-gray-50 hover:border-gray-300"}`,children:[(0,b.jsx)("span",{className:`text-sm mb-1 font-medium ${n===a.date?"text-blue-100":"text-gray-500"}`,children:a.day}),(0,b.jsx)("span",{className:"text-2xl font-bold",children:a.date})]},c))}),n&&(0,b.jsxs)("div",{className:"mt-6 pt-6 border-t border-gray-100 animate-in fade-in slide-in-from-top-4 duration-300",children:[(0,b.jsx)("h4",{className:"font-bold text-gray-700 mb-3 text-sm",children:"時間を選択してください"}),t?(0,b.jsx)("div",{className:"grid grid-cols-3 gap-3",children:v.map(a=>{let c=(a=>{if(!u)return!1;let b=new Date;if(u.date!==b.getDate()||u.month!==b.getMonth()+1)return!1;let[c,d]=a.split(":").map(Number),e=b.getHours(),f=b.getMinutes();return!!(c<e)||c===e&&!!(d<f)})(a);return(0,b.jsx)("button",{disabled:c,onClick:()=>q(a),className:`py-2 px-1 rounded-lg text-sm font-bold border transition-all ${c?"bg-gray-100 text-gray-300 border-gray-100 cursor-not-allowed":p===a?"bg-blue-600 text-white border-blue-600 shadow-md":"bg-white border-gray-200 text-gray-600 hover:border-blue-300 hover:text-blue-500"}`,children:a},a)})}):(0,b.jsx)("p",{className:"text-red-500 text-sm",children:"先にメニューを選択してください"})]})]})]}),(0,b.jsx)("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t p-4 shadow-[0_-5px_10px_rgba(0,0,0,0.05)] z-[60]",children:(0,b.jsxs)("div",{className:"max-w-md mx-auto flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-gray-500 text-sm font-medium",children:u&&p?`${u.month}月${u.date}日(${u.day}) ${p}`:"日時未選択"}),(0,b.jsx)("div",{className:`font-bold transition-all ${t?"text-blue-600 text-md":"text-blue-500 text-sm animate-pulse"}`,children:t?t.name:"メニューを選択してください"})]}),(0,b.jsx)("button",{disabled:!t||!n||!p,className:`px-8 py-3 rounded-full font-bold text-white shadow-lg transition-all transform ${!t||!n||!p?"bg-blue-300 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 active:scale-95 shadow-blue-200"}`,onClick:()=>{if(!j||!n||!p||!u)return;let a=new URLSearchParams({staffName:j.display_name||"",date:`${u.month}月${u.date}日`,time:p});i.push(`/reservation/complete?${a.toString()}`)},children:"予約する"})]})})]})}a.s(["default",()=>i])}];

//# sourceMappingURL=_e9bc7fd7._.js.map